<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.java.dao.MemberDao">
    <!-- 로그인 -->
    <select id="selectSignIn" resultType="com.java.dto.MemberDto">
        SELECT * FROM member2 WHERE id=#{id} AND pw=#{pw}
    </select>
    <select id="findByAutoLoginToken" parameterType="String" resultType="com.java.dto.MemberDto">
        SELECT * FROM member2 WHERE auto_login_token = #{autoLoginToken}
    </select>

    <update id="updateAutoLoginToken" parameterType="com.java.dto.MemberDto">
        UPDATE member2 SET auto_login_token = #{autoLoginToken} WHERE id = #{id}
    </update>
    
    <!-- 아이디로 사용자 정보 찾기 -->
    <select id="findByUsername" parameterType="String" resultType="com.java.dto.MemberDto">
        SELECT * FROM member2 WHERE id = #{id}
    </select>

    <!-- 비밀번호 업데이트 -->
    <update id="updatePassword" parameterType="com.java.dto.MemberDto">
        UPDATE member2 SET pw = #{pw} WHERE id = #{id}
    </update>
    
    <!-- 임시 비밀번호 저장 -->
    <update id="saveTempPassword" parameterType="com.java.dto.MemberDto">
        UPDATE member2 SET temp_pw = #{pw} WHERE id = #{id}
    </update>
    
    <!-- 임시 비밀번호 가져오기 -->
    <select id="getTempPassword" parameterType="String" resultType="String">
        SELECT temp_pw FROM member2 WHERE id = #{id}
    </select>
</mapper>
